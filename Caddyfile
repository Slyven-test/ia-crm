ia-crm.aubach.fr {
	encode zstd gzip

	# Security headers
	header {
		Strict-Transport-Security "max-age=63072000; includeSubDomains; preload"
		X-Content-Type-Options "nosniff"
	}

	@api path /api/* /health
	handle @api {
		reverse_proxy backend:8000
	}

	handle {
		reverse_proxy frontend:80
	}

	# HTTP -> HTTPS redirect is handled automatically by Caddy when TLS is enabled.
}
